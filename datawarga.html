<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi RT-16</title>
		
	    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img/Logo_erte.png">
	
    <!-- Bootstrap CSS untuk tampilan seperti jumbotron -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Link ke file CSS eksternal -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- header -->
    <style>
        /* Gradasi biru muda ke hijau langit pada header tabel */
        table.table-bordered th {
            background: linear-gradient(to bottom, #87CEEB, #FFFFFF); /* Biru muda ke hijau langit */
            color: #000; /* Warna teks hitam */
        }

        table.table-bordered td {
            background: none; /* Hapus background pada td */
        }
    </style>

    <!-- Logo di kiri atas -->
    <div class="logo-container">
        <img src="img/Logo_erte.png" alt="Logo RT" class="logo">
    </div>
    
    <div class="jumbotron text-center">
        <h1 class="display-4">SISTEM INFORMASI</h1>
        <h2>RT-16 ( RW 16 )</h2>
        <h3>PERUM BCL ~ DESA WALUYA</h3>
        <h4>KECAMATAN CIKARANG UTARA ~ KABUPATEN BEKASI</h4>
    <!-- <hr class="my-4"> -->
    </div>

    <!-- Navbar dengan tombol -->
    <div class="navbar text-center">
        <a class="active" href="index.html"><span>Home</span></a>
        <a class="btn gradient-button m-2" href="about.html"><span>About My</span></a>
		<a class="btn gradient-button m-2" href="struktur.html"><span>Stuktur Organisasi</span></a>
        <a class="btn gradient-button m-2" href="programkerja.html"><span>Program Kerja</span></a>
        <a class="btn gradient-button m-2" href="laporanprogramkerja.html"><span>Laporan Program Kerja</span></a>
        <a class="btn gradient-button m-2" href="laporankas.html"><span>Laporan KAS RT</span></a>
		<a class="btn gradient-button m-2" href="laporankassosial.html"><span>Laporan KAS SOSIAL</span></a>
        <a class="btn gradient-button m-2" href="datawarga.html"><span>Data Warga & Area</span></a>
        <a class="btn gradient-button m-2" href="contact.html"><span>CONTACT</span></a>
        
        <!-- Dropdown Menu -->
        <!-- <div class="dropdown d-inline-block m-2">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More Options
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Option 1</a>
                <a class="dropdown-item" href="#">Option 2</a>
                <a class="dropdown-item" href="#">Option 3</a>
            </div>
        </div>
    </div> -->
	<!-- Dropdown Menu -->
     <div class="dropdown d-inline-block m-2">
    <button class="neon-dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        More Options
		    <span></span>
            <span></span>
            <span></span>
            <span></span>
		</button>
			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			<a class="btn gradient-button m-2" href="#"><span>Data Aset RT</span></a>
			<a class="btn gradient-button m-2" href="#"><span>Template Proposal</span></a>
			<a class="btn gradient-button m-2" href="setting.html"><span>Setting Admin</span></a>
			</div>
		   </div>
		 </div>

		<div class="jumbotron text-center">

		<!-- label -->

	<div class="container">
			<h2><strong>DATA WARGA RT16</strong></h2> </section>
	<hr>
	<div class="container">
    <div class="row">
        <!-- Kolom untuk Tabel Summary Data Warga -->
        <div class="col-md-8">
            <div id="gang-summary" class="mb-4">
                <p><h2><strong>Total Jumlah KK: </strong><span id="total-warga">0</span></h2></p>
            </div>
            <!-- Summary Data Warga -->
            <div class="table-responsive">
                <table id="gang-summary-table" class="table table-bordered">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Gang</th>
                            <th>Jumlah KK</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data summary akan dimuat di sini -->
                    </tbody>
                </table>
            </div>
        </div>

<!-- Kolom untuk Gambar Peta Warga -->
<div class="col-md-4 text-center">
    <h2><strong>Peta Sebaran Warga</strong></h2>
    <img id="mapImage" src="img/PetaSebaranWarga.jpg" alt="Peta Sebaran Warga" class="img-fluid" 
        style="max-width: 100%; height: auto; border: 1px solid #ddd; cursor: pointer;" onclick="zoomImage()">
		                    <!-- Ikon Zoom -->
                    <div class="zoom-icons">
                        <i class="fas fa-search-plus zoom-in" onclick="zoomImage()"></i>
                    </div>
</div>
</div>
</div>
<hr>

	    <!-- Input pencarian -->
    <div class="search-container mb-4">
        <input type="text" id="searchInput" placeholder="Cari data warga..." class="form-control form-control-sm w-25" onkeyup="filterTable()">
    </div>
    <!-- Tabel Data Warga -->
	<!-- <div class="table-responsive"> -->
	<div class="table-container">
    <table id="laporan-table" class="table table-bordered">
        <thead>
            <tr>
                <th>No</th>
                <th>No.KK</th>
                <th>Blok/No</th>
                <th>Nama</th>
                <th>Gang</th>
				<th>Posisi</th>
				<th>No.HP</th>
				<th>Keterangan</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data akan dimuat di sini -->
        </tbody>
    </table>
</div>

			
	<hr>


	<!-- footer -->
    <footer class="footer">
		<div class="footer-content">
            <small>Copyright &copy; 2024 - Gunawan. All Rights Reserved.</small>
        </div>
    </footer>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const csvFilePath = "data/datawarga.csv"; // Ganti dengan path file CSV Anda
        
        Papa.parse(csvFilePath, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function (results) {
                const data = results.data;
                const gangSummaryTable = document.querySelector("#gang-summary-table tbody");
                const tableBody = document.querySelector("#laporan-table tbody");
                let totalWarga = 0;
                const gangSummary = {};

                if (data && data.length > 0) {
                    // Menghitung jumlah warga per gang
                    data.forEach((row, index) => {
                        const gang = row["Gang"] || "-";
						
						// Lewati gang yang kosong atau "-"
                        if (!gang || gang === "-") return;

                        // Hitung jumlah warga per gang
                        if (!gangSummary[gang]) {
                            gangSummary[gang] = 0;
                        }
                        gangSummary[gang] += 1;

                        // Tambahkan data ke tabel detail warga
                        const tr = document.createElement("tr");
                        const noHp = row["No.HP"] || "-";
                        tr.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${row["No.KK"] || "-"}</td>
                            <td>${row["Blok/No"] || "-"}</td>
                            <td>${row["Nama"] || "-"}</td>
                            <td>${gang}</td>
                            <td>${row["Posisi"] || "-"}</td>
                            <td>${formatPhoneNumber(noHp)}</td>
                            <td>${row["Keterangan"] || "-"}</td>
                        `;
                        tableBody.appendChild(tr);

                        totalWarga += 1; // Tambah total warga
                    });

                    // Tambahkan data ke tabel summary gang
                    let no = 1;
                    for (let gang in gangSummary) {
                        const tr = document.createElement("tr");
                        tr.innerHTML = `
                            <td>${no++}</td>
                            <td>${gang}</td>
                            <td>${gangSummary[gang]}</td>
                        `;
                        gangSummaryTable.appendChild(tr);
                    }

                    // Tampilkan total jumlah warga
                    document.getElementById("total-warga").textContent = totalWarga;
                } else {
                    console.error("File CSV kosong atau tidak sesuai format.");
                }
            },
            error: function (error) {
                console.error("Error saat membaca file CSV:", error);
            }
        });
    });

    function formatPhoneNumber(phone) {
        if (phone && phone.trim() !== "-" && !phone.trim().startsWith("+62")) {
            return "+62 " + phone.trim();
        }
        return phone.trim();
    }

    function filterTable() {
        const searchInput = document.getElementById("searchInput").value.toLowerCase();
        const table = document.getElementById("laporan-table");
        const rows = table.getElementsByTagName("tr");

        for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].getElementsByTagName("td");
            let match = false;

            for (let j = 0; j < cells.length; j++) {
                if (cells[j].innerText.toLowerCase().includes(searchInput)) {
                    match = true;
                    break;
                }
            }

            rows[i].style.display = match ? "" : "none";
        }
    }
	
    function zoomImage() {
        var image = document.getElementById("mapImage");

        // Menambah kelas CSS untuk efek zoom
        if (image.style.transform === "scale(2)") {
            image.style.transform = "scale(1)"; // Reset ke ukuran normal
            image.style.transition = "transform 0.3s ease"; // Tambahkan transisi
            image.style.position = "relative"; // Kembalikan posisi relatif
            image.style.zIndex = "1"; // Kembalikan z-index normal
        } else {
            image.style.transform = "scale(2)"; // Zoom gambar
            image.style.transition = "transform 0.3s ease"; // Tambahkan transisi
            //image.style.position = "absolute"; // Set posisi gambar ke absolute
            image.style.zIndex = "999"; // Pastikan gambar ada di atas elemen lain
        }
    }
	
</script>
</body>
</html>
