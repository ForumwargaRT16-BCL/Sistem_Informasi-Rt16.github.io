<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi RT-16</title>
		
	    <!-- Favicon -->
    <link rel="icon" type="image/png" href="img/Logo_erte.png">
	
    <!-- Bootstrap CSS untuk tampilan seperti jumbotron -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Link ke file CSS eksternal -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- header -->
    <style>
        /* Gradasi biru muda ke hijau langit pada header tabel */
        table.table-bordered th {
            background: linear-gradient(to bottom, #87CEEB, #FFFFFF); /* Biru muda ke hijau langit */
            color: #000; /* Warna teks hitam */
        }

        table.table-bordered td {
            background: none; /* Hapus background pada td */
        }
    </style>
    <!-- Logo di kiri atas -->
    <div class="logo-container">
        <img src="img/Logo_erte.png" alt="Logo RT" class="logo">
    </div>
    
    <div class="jumbotron text-center">
        <h1 class="display-4">SISTEM INFORMASI</h1>
        <h2>RT-16 ( RW 16 )</h2>
        <h3>PERUM BCL ~ DESA WALUYA</h3>
        <h4>KECAMATAN CIKARANG UTARA ~ KABUPATEN BEKASI</h4>
    <!-- <hr class="my-4"> -->
    </div>

    <!-- Navbar dengan tombol -->
		<div class="navbar text-center">
			<a class="active" href="index.html">
				<img src="icon/house.png" alt="Home Icon" class="icon">
				<span>Home</span>
			</a>
			<a class="btn gradient-button m-2" href="dashboard.html">
				<img src="icon/dashboard.png" alt="Dashboard Icon" class="icon">
				<span>Dashboard</span>
			</a>
			<a class="btn gradient-button m-2" href="admin_setting.html">
				<img src="icon/settings.png" alt="Settings Icon" class="icon">
				<span>Setting</span>
			</a>
			<a class="btn gradient-button m-2" href="admin_help.html">
				<img src="icon/help.png" alt="Help Icon" class="icon">
				<span>Help</span>
			</a>
			<a class="btn gradient-button m-2" href="admin_contact.html">
				<img src="icon/seo.png" alt="Contact Icon" class="icon">
				<span>Contact</span>
			</a>
		</div>
        
        <!-- Dropdown Menu -->
        <!-- <div class="dropdown d-inline-block m-2">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                More Options
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Option 1</a>
                <a class="dropdown-item" href="#">Option 2</a>
                <a class="dropdown-item" href="#">Option 3</a>
            </div>
        </div>
    </div> -->
	<!-- Dropdown Menu -->
     <div class="dropdown d-inline-block m-2">
    <button class="neon-dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        More Options
		    <span></span>
            <span></span>
            <span></span>
            <span></span>
		</button>
			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			<a class="btn gradient-button m-2" href="#"><span>Data Aset RT</span></a>
			<a class="btn gradient-button m-2" href="#"><span>Template Proposal</span></a>
			<a class="btn gradient-button m-2" href="setting.html"><span>Setting Admin</span></a>
			</div>
		   </div>
		 </div>

		<div class="jumbotron text-center">

		<!-- label -->

	<div class="container">
			<h2>EDIT LAPORAN PROGRAM KERJA</h2> </section>
	<hr>
        <hr>
        <form id="editForm" class="p-4 border rounded shadow">
            <div class="form-group">
                <label for="noIndex">No (Index)</label>
                <input type="number" class="form-control" id="noIndex" name="no_index" readonly>
            </div>
            <div class="form-group">
                <label for="editTahun">Tahun</label>
                <input type="text" class="form-control" id="editTahun" name="tahun">
            </div>
            <div class="form-group">
                <label for="editTanggal">Tanggal/Bulan</label>
                <input type="text" class="form-control" id="editTanggal" name="tanggal">
            </div>
            <div class="form-group">
                <label for="editProgram">Program</label>
                <input type="text" class="form-control" id="editProgram" name="program">
            </div>
            <div class="form-group">
                <label for="editLaporan">Link Google Drive Laporan</label>
                <input type="url" class="form-control" id="editLaporan" name="laporan">
            </div>
            <div class="form-group">
                <label for="editKeterangan">Keterangan</label>
                <textarea class="form-control" id="editKeterangan" name="keterangan" rows="4"></textarea>
            </div>
            <div class="form-group text-center">
                <button type="submit" class="btn btn-primary btn-sm">Simpan</button>
            </div>
        </form>
    </div>
	
	<hr>

	<!-- footer -->
    <footer class="footer">
		<div class="footer-content">
            <small>Copyright &copy; 2024 - Gunawan. All Rights Reserved.</small>
        </div>
    </footer>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script>
        const csvFilePath = "data/laporankerja.csv"; // Sesuaikan dengan lokasi file CSV Anda

        // Ambil parameter 'no_index' dari URL
        const urlParams = new URLSearchParams(window.location.search);
        const noIndex = urlParams.get("no_index");

        function fillForm(data) {
            document.getElementById("noIndex").value = data["No"];
            document.getElementById("editTahun").value = data["Tahun"];
            document.getElementById("editTanggal").value = data["Tanggal/Bulan"];
            document.getElementById("editProgram").value = data["Program"];
            document.getElementById("editLaporan").value = data["Laporan"];
            document.getElementById("editKeterangan").value = data["Keterangan"];
        }

        function loadCSV() {
            Papa.parse(csvFilePath, {
                download: true,
                header: true,
                complete: function(results) {
                    const rowData = results.data.find(row => row["No"] === noIndex);
                    if (rowData) {
                        fillForm(rowData);
                    } else {
                        alert("Data tidak ditemukan untuk No Index: " + noIndex);
                    }
                },
                error: function(error) {
                    console.error("Gagal membaca file CSV:", error);
                }
            });
        }

        function handleSubmit(event) {
            event.preventDefault();

            const updatedData = {
                No: document.getElementById("noIndex").value,
                Tahun: document.getElementById("editTahun").value,
                Tanggal: document.getElementById("editTanggal").value,
                Program: document.getElementById("editProgram").value,
                Laporan: document.getElementById("editLaporan").value,
                Keterangan: document.getElementById("editKeterangan").value,
            };

            console.log("Data yang diperbarui:", updatedData);
            alert("Data berhasil disimpan!");
            window.location.href = "edit_laporanprogramkerja.html";
        }

        document.addEventListener("DOMContentLoaded", () => {
            loadCSV();
            document.getElementById("editForm").addEventListener("submit", handleSubmit);
        });
    </script>
</body>
</html>
